package com.juchap.snake.Managers;

import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.Preferences;

public class VibrationManager {

    ////////////////////////////////////////////////////////////////////////////////////////////////
    public static void initManager() {
        _vibrationPrefs = Gdx.app.getPreferences(PREFS_NAME);

        if (_vibrationPrefs.contains(KEY_NAME)) {
            loadFromPrefs();
        }
        else {
            _vibrationEnabled = true;
            saveToPrefs();
        }
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////
    private static void loadFromPrefs() {
        _vibrationEnabled = _vibrationPrefs.getBoolean(KEY_NAME);
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////
    private static void saveToPrefs() {
        _vibrationPrefs.putBoolean(KEY_NAME, _vibrationEnabled);
        _vibrationPrefs.flush();
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////
    public static void vibrateShort() {
        vibrate(SHORT);
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////
    public static void vibrateMedium() {
        vibrate(MEDIUM);
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////
    public static void vibrateLong() {
        vibrate(LONG);
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////
    private static void vibrate(int duration) {
        if (!_vibrationEnabled) {
            // Vibration disabled
            return;
        }

        Gdx.input.vibrate(duration);
    }

    ////////////////////////////////////////////////////////////////////////////////////////////////
    /// GET / SET
    ////////////////////////////////////////////////////////////////////////////////////////////////

    ////////////////////////////////////////////////////////////////////////////////////////////////
    public static void setState(boolean isEnabled) {
        _vibrationEnabled = isEnabled;
        saveToPrefs();
    }

    public static boolean getState() { return _vibrationEnabled; }

    ////////////////////////////////////////////////////////////////////////////////////////////////
    /// VARIABLES
    ////////////////////////////////////////////////////////////////////////////////////////////////

    private static final String PREFS_NAME = "Vibration";
    private static final String KEY_NAME = "isEnabled";
    private static final int SHORT = 128;
    private static final int MEDIUM = 258;
    public static final int LONG = 512;

    private static Preferences _vibrationPrefs;

    private static boolean _vibrationEnabled;
}
